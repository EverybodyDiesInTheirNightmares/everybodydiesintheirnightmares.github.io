<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    
    <title> - 双绞麻痹</title>
    <meta charset="utf-8">
    
    <meta name="title" content=" - 双绞麻痹">
    <meta name="description" content="">
    <meta property="og:image" content="/favicon.png">
    <meta property="og:image:width" content="200" />
    <meta property="og:image:height" content="200" />
    
    <!-- 字体设置 -->
    <!-- 20250202修改京华老宋体 -->
    <link href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&display=swap" rel="stylesheet">
    <!-- <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@200..900&display=swap" rel="stylesheet"> -->
    <link rel='stylesheet' href='https://chinese-fonts-cdn.deno.dev/packages/jhlst/dist/京華老宋体v2_002/result.css' />

    <style>
        body {
            font-family: KingHwa_OldSong, 'KingHwa_OldSong', 'Source Serif Pro', 'Source Han Serif TC', 'Noto Serif CJK TC', 'Noto Serif TC', serif;
        }
    </style>
    <link rel="shortcut icon" href="/favicon.png">
    
    <!--  -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- 
<script src="/js/jquery.min.js"></script>
 -->
    <!-- 将jQuery置于cdn -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.1.1"><link rel="alternate" href="/atom.xml" title="双绞麻痹" type="application/atom+xml">
</head>

<body>
    <header class="header">
    <div class="blog-title">
        <a href="/" class="logo">双绞麻痹</a>
    </div>
    <nav class="navbar">
        <ul class="menu">
            
            
            
            <li class="menu-item">
                
                <a href="/archives" class="menu-item-link">索引</a>
                
            </li>
            
            
            
            <li class="menu-item">
                
                <a href="/been2" class="menu-item-link">去过</a>
                
            </li>
            
            
            
            <li class="menu-item">
                
                <a href="/X" class="current-menu-item-link">度过</a>
                
            </li>
            
            
            
            <li class="menu-item">
                
                <a href="/words" class="menu-item-link">箴言</a>
                
            </li>
            
            
            
            <li class="menu-item">
                
                <a href="/comments" class="menu-item-link">留言</a>
                
            </li>
            
            
            
            <li class="menu-item">
                
                <a href="/about" class="menu-item-link">关于</a>
                
            </li>
            
            
            
            <li class="menu-item">
                
                <a href="https://numb.tech/atom.xml" class="menu-item-link">订阅</a>
                
            </li>
            
        </ul>
    </nav>
</header>
    <main class="main">
        <article class="post">
    <div class="post-title">
        <h1 class="title"></h1>
    </div>
    <div class="post-content">
        <!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>others</title>
    <style>
        :root {
            --max-width: 750px;
        }
        body {
            font-size: 16px;
            line-height: 1.6em;
            padding: 0 1.5em;
            margin: 0 auto;
            max-width: var(--max-width);
            word-break: break-word;
        }
        @media screen and (min-width: 750px) {
            body {
                margin-left: calc((100vw - 3em - var(--max-width)) / 2);
            }
        }
        .neodb-container {
            --db-item-width: 80px;
            --db-item-height: 180px;
            --db-primary-color: var(--farallon-hover-color);
            --db-background-white: var(--farallon-background-white);
            --db-background-gray: var(--farallon-background-gray);
            --db-border-color: var(--farallon-border-color);
            --db-text-light: var(--farallon-text-light);
        }
        .neodb-nav {
            padding: 1px 0 20px;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
        }
        .neodb-navItem {
            font-size: 20px;
            cursor: pointer;
            border-bottom: 1px solid rgba(0, 0, 0, 0);
            transition: 0.5s border-color;
            display: flex;
            align-items: center;
            text-transform: capitalize;
            margin-right: 20px;
        }
        .neodb-navItem:hover {
            border-color: inherit;
        }
        .neodb-list {
            display: flex;
            align-items: flex-start;
            flex-wrap: wrap;
        }
        .neodb-title {
            margin-top: 2px;
            font-size: 14px;
            line-height: 1.4;
        }
        .neodb-title a:hover {
            color: var(--db-primary-color);
            text-decoration: underline;
        }
        .neodb-item {
            width: var(--db-item-width);
            margin-right: 20px;
            margin-bottom: 20px;
            position: relative;
        }
    
        .neodb-card__list {
            display: flex;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px dotted var(--farallon-border-color);
            font-size: 14px;
            color: rgba(0, 0, 0, 0.55);
        }
        .neodb-card__list:last-child {
            border-bottom: 0;
        }
        .neodb-card__list .title {
            font-size: 18px;
            margin-bottom: 5px;
        }
        .neodb-dateList__card {
            display: flex;
            flex-wrap: wrap;
            align-items: flex-start;
        }
        .neodb-listBydate {
            display: flex;
            align-items: flex-start;
            margin-top: 15px;
        }
        @media (max-width: 600px) {
            .neodb-listBydate {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
       <div class="neodb-container">
                <nav class="neodb-nav"></nav>
        <div class="neodb-list"></div>
        <div class="block-more block-more__centered">
        <div class="lds-ripple"></div>
        </div>
    </div>
    <br><br>
    <span>数据来源我的</span>
    <a href="https://neodb.social/users/oxy93n/" target="_blank">NeoDB</a>
    <span>。点击交互。</span>
  
  <script>
        class NeoDB {
            constructor(config) {
                this.container = config.container;
                this.types = config.types ?? ["book", "movie", "music", "game","tv"];
                this.typeNames = {
                    book: "书\u00A0",
                    movie: "影\u00A0",
                    music: "音\u00A0",
                    game: "游\u00A0",
                    tv: "剧\u00A0"
                };
                this.baseAPI = config.baseAPI;
                this.type = "book";
                this.status = "complete";
                this.finished = false;
                this.paged = 1;
                this.subjects = [];
                this._create();
            }

            on(event, element, callback) {
                const nodeList = document.querySelectorAll(element);
                nodeList.forEach((item) => {
                    item.addEventListener(event, callback);
                });
            }

            _handleTypeClick() {
                this.on("click", ".neodb-navItem", (t) => {
                    const self = t.currentTarget;
                    this.type = self.dataset.type;
                    this._clearList();
                    this._toggleLoading(true);
                    this.paged = 1;
                    this.finished = false;
                    this.subjects = [];
                    this._fetchData();
                });
            }

            _renderTypes() {
                document.querySelector(".neodb-nav").innerHTML = this.types
                    .map((item) => {
                        return `<span class="neodb-navItem" data-type="${item}">${this.typeNames[item]}</span>`;
                    })
                    .join("");
                this._handleTypeClick();
            }

            _fetchData() {
                const params = new URLSearchParams({
                    type: "complete",
                    category: this.type,
                    page: this.paged.toString(),
                });
            
                return fetch(this.baseAPI + "?" + params.toString())
                    .then((response) => response.json())
                    .then((data) => {
                        if (data.length) {
                            // 过滤重复项
                            data = data.filter(item => !this.subjects.some(existing => existing.item.id === item.item.id));
                            
                            if (data.length) {
                                this.subjects = [...this.subjects, ...data];
                                this._renderListTemplate();
                            }
            
                            this._toggleLoading(false);
                        } else {
                            this.finished = true; // 没有更多数据
                            this._toggleLoading(false);
                        }
                    });
            }

            _renderListTemplate() {
                document.querySelector(".neodb-list").innerHTML = this.subjects
                    .map((item) => {
                        const title = "《"+item.item.title+"》";
                        const link = item.item.id;
                        const comment_text = item.comment_text; // 获取 comment_text 属性

                        return `<div class="neodb-item">
                            <div class="neodb-title">
                                <a href="${link}" target="_blank">${title}</a>
                            </div>
                            <div class="neodb-comment">
                                ${comment_text ? `<p>${comment_text}</p>` : ""}
                            </div>
                        </div>`;
                    })
                    .join("");
            }

            _handleScroll() {
                let isLoading = false; // 标志位，表示是否正在加载数据
                let lastScrollTop = 0; // 上一次的滚动位置
            
                window.addEventListener("scroll", () => {
                    const scrollY = window.scrollY || window.pageYOffset;
                    const moreElement = document.querySelector(".block-more");
            
                    // 检查滚动到底部的条件
                    if (
                        moreElement.offsetTop + moreElement.clientHeight <= scrollY + window.innerHeight &&
                        this._isLoadingHidden() &&
                        !this.finished &&
                        !isLoading // 确保没有正在加载数据
                    ) {
                        isLoading = true; // 设置标志位为 true，表示正在加载数据
                        this._toggleLoading(true);
                        this.paged++;
                        this._fetchData().finally(() => {
                            isLoading = false; // 数据加载完成后，重置标志位
                        });
                    }
            
                    // 更新上一次的滚动位置
                    lastScrollTop = scrollY;
                });
            }

            _create() {
                if (document.querySelector(".neodb-container")) {
                    const container = document.querySelector(this.container);
                    if (!container) return;
                    container.innerHTML = `
                        <nav class="neodb-nav"></nav>
                        <div class="neodb-list"></div>
                        <div class="block-more block-more__centered">
                            <div class="lds-ripple"></div>
                        </div>
                    `;
                    this._renderTypes();
                    this._fetchData();
                    this._handleScroll();
                }
            }

            _clearList() {
                document.querySelector(".neodb-list").innerHTML = "";
            }

            _toggleLoading(show) {
                const loadingElement = document.querySelector(".lds-ripple");
                if (show) {
                    loadingElement.classList.remove("u-hide");
                } else {
                    loadingElement.classList.add("u-hide");
                }
            }

            _isLoadingHidden() {
                return document.querySelector(".lds-ripple").classList.contains("u-hide");
            }
        }

        document.addEventListener("DOMContentLoaded", () => {
            const neodb = new NeoDB({
                container: ".neodb-container",
                baseAPI: "https://x.numb.tech/api",
                types: ["book", "movie", "music", "game","tv"],
            });
        });
    </script>
</body>
</html>
    </div>
    <div class="post-meta">
        
        <span class="post-time">二〇二五年二月十一日</span>
    </div>
</article>
<!-- 版权提醒 -->
<p class="thanks">© 双绞麻痹</p>
<!--  -->
<div class="prev_next">
    <nav id="prev_next">

</nav>
</div>

<div class="post-comment">
    



</div>

    </main>
</body>

</html>
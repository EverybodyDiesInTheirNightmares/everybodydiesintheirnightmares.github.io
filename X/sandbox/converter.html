<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    
    <title> - åŒç»éº»ç—¹</title>
    <meta charset="utf-8">
    
    <meta name="title" content=" - åŒç»éº»ç—¹">
    <meta name="description" content="">
    <meta property="og:image" content="/favicon.png">
    <meta property="og:image:width" content="200" />
    <meta property="og:image:height" content="200" />
    
    <!-- å­—ä½“è®¾ç½® -->
    <!-- 20250202ä¿®æ”¹äº¬åè€å®‹ä½“ -->
    <link href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&display=swap" rel="stylesheet">
    <!-- <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@200..900&display=swap" rel="stylesheet"> -->
    <link rel='stylesheet' href='https://chinese-fonts-cdn.deno.dev/packages/jhlst/dist/äº¬è¯è€å®‹ä½“v2_002/result.css' />

    <style>
        body {
            font-family: KingHwa_OldSong, 'KingHwa_OldSong', 'Source Serif Pro', 'Source Han Serif TC', 'Noto Serif CJK TC', 'Noto Serif TC', serif;
        }
    </style>
    <link rel="shortcut icon" href="/favicon.png">
    
    <!--  -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- 
<script src="/js/jquery.min.js"></script>
 -->
    <!-- å°†jQueryç½®äºcdn -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.1.1"><link rel="alternate" href="/atom.xml" title="åŒç»éº»ç—¹" type="application/atom+xml">
</head>

<body>
    <header class="header">
    <div class="blog-title">
        <a href="/" class="logo">åŒç»éº»ç—¹</a>
    </div>
    <nav class="navbar">
        <ul class="menu">
            
            
            
            <li class="menu-item">
                
                <a href="/archives" class="menu-item-link">ç´¢å¼•</a>
                
            </li>
            
            
            
            <li class="menu-item">
                
                <a href="/been2" class="menu-item-link">å»è¿‡</a>
                
            </li>
            
            
            
            <li class="menu-item">
                
                <a href="/X" class="menu-item-link">åº¦è¿‡</a>
                
            </li>
            
            
            
            <li class="menu-item">
                
                <a href="/words" class="menu-item-link">ç®´è¨€</a>
                
            </li>
            
            
            
            <li class="menu-item">
                
                <a href="/comments" class="menu-item-link">ç•™è¨€</a>
                
            </li>
            
            
            
            <li class="menu-item">
                
                <a href="/about" class="menu-item-link">å…³äº</a>
                
            </li>
            
            
            
            <li class="menu-item">
                
                <a href="https://numb.tech/atom.xml" class="menu-item-link">è®¢é˜…</a>
                
            </li>
            
        </ul>
    </nav>
</header>
    <main class="main">
        <article class="post">
    <div class="post-title">
        <h1 class="title"></h1>
    </div>
    <div class="post-content">
        <!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>æœ¬åœ°EPUBè½¬MOBI</title>
    <style>
        #dropZone {
            border: 2px dashed #ccc; 
            padding: 2rem;
            text-align: center;
            margin: 2rem auto;
            max-width: 600px;
            cursor: pointer;
        }
        #status {
            color: #666;
            text-align: center;
            margin-top: 1rem;
        }
    </style>
</head>
<body>
    <div id="dropZone">
        ğŸ“ æ‹–æ”¾EPUBæ–‡ä»¶åˆ°è¿™é‡Œæˆ–ç‚¹å‡»é€‰æ‹©<br>
        <small>ï¼ˆChrome/Edgeæµè§ˆå™¨ï¼Œæ–‡ä»¶éœ€å°äº2MBï¼‰</small>
        <input type="file" id="fileInput" accept=".epub" hidden>
    </div>
    <div id="status">å‡†å¤‡å°±ç»ª</div>

<!-- ä½¿ç”¨iframeåŠ è½½pandoc-wasm -->
<iframe id="pandocFrame" src="https://cdn.jsdelivr.net/npm/pandoc-wasm@0.0.2/dist/pandoc.min.js" style="display:none;"></iframe>

<script>
async function convertToMobi(file) {
    const status = document.getElementById('status');
    try {
        status.textContent = 'æ­£åœ¨åŠ è½½è½¬æ¢å¼•æ“...';
        
        const iframe = document.getElementById('pandocFrame');
        const pandoc = await new Promise((resolve, reject) => {
            iframe.onload = () => {
                const module = iframe.contentWindow.Module;
                if (module && module.FS && module.callMain) {
                    resolve(module);
                } else {
                    reject(new Error('Pandocæ¨¡å—åŠ è½½å¤±è´¥'));
                }
            };
            iframe.onerror = reject;
        });
        
        status.textContent = 'æ­£åœ¨è½¬æ¢æ–‡ä»¶...';
        const reader = new FileReader();
        
        reader.onload = async (e) => {
            try {
                // å†™å…¥è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ
                pandoc.FS.writeFile('input.epub', new Uint8Array(e.target.result));
                
                // æ‰§è¡Œè½¬æ¢å‘½ä»¤
                pandoc.callMain(['input.epub', '-o', 'output.mobi', '-t', 'mobi']);
                
                // è¯»å–ç»“æœ
                const mobiData = pandoc.FS.readFile('output.mobi');
                
                // åˆ›å»ºä¸‹è½½é“¾æ¥
                const blob = new Blob([mobiData], { type: 'application/x-mobi' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = file.name.replace('.epub', '.mobi');
                a.click();
                
                status.textContent = 'è½¬æ¢å®Œæˆï¼';
            } catch (error) {
                status.textContent = 'è½¬æ¢å¤±è´¥: ' + error.message;
            }
        };
        reader.readAsArrayBuffer(file);
        
    } catch (error) {
        status.textContent = 'é”™è¯¯: ' + error.message;
    }
}

// äº‹ä»¶ç»‘å®š
document.getElementById('dropZone').addEventListener('click', () => {
    document.getElementById('fileInput').click();
});

document.getElementById('fileInput').addEventListener('change', (e) => {
    if (e.target.files[0]) convertToMobi(e.target.files[0]);
});

document.addEventListener('dragover', e => e.preventDefault());
document.addEventListener('drop', e => {
    e.preventDefault();
    const file = e.dataTransfer.files[0];
    if (file && file.name.endsWith('.epub')) {
        convertToMobi(file);
    } else {
        alert('è¯·é€‰æ‹©EPUBæ–‡ä»¶');
    }
});
</script>
</body>
</html>

    </div>
    <div class="post-meta">
        
        <span class="post-time">äºŒã€‡äºŒäº”å¹´ä¹æœˆå»¿ä¸ƒæ—¥</span>
    </div>
</article>
<!-- ç‰ˆæƒæé†’ -->
<p class="thanks">Â© åŒç»éº»ç—¹</p>
<!--  -->
<div class="prev_next">
    <nav id="prev_next">

</nav>
</div>

<div class="post-comment">
    



</div>

    </main>
</body>

</html>